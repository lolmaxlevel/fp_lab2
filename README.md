# Лабораторная работа №2 по дисциплине "Функциональное Программирование"

## Терновский Илья, P3332

## Вариант: `Open Addressing Hashmap Set`

## Задание

Цель: освоиться с построением пользовательских типов данных, полиморфизмом, рекурсивными алгоритмами и средствами
тестирования (unit testing, property-based testing).

## Требования:

1. Функции:
    - [X] добавление и удаление элементов;
    - [X] фильтрация;
    - [X] отображение (map);
    - [X] свертки (левая и правая);
    - [X] структура должна быть моноидом.
2. Структуры данных должны быть неизменяемыми.
3. Библиотека должна быть протестирована в рамках unit testing.
4. Библиотека должна быть протестирована в рамках property-based тестирования (как минимум 3 свойства, включая свойства
   моноида).
5. Структура должна быть полиморфной.
6. Требуется использовать идиоматичный для технологии стиль программирования. Примечание: некоторые языки позволяют
   получить большую часть API через реализацию небольшого интерфейса. Так как лабораторная работа про ФП, а не про
   экосистему языка -- необходимо реализовать их вручную и по возможности -- обеспечить совместимость.

## Немного о реализации

Я немного поленился, поэтому был реализован Open Addressing HashSet, то есть это классический hashtable, в котором для
решения коллизий используется метод открытой адресации(линейное пробирование).

В качестве хэширующей функции была использована стандартная функция `erlang:phash2/2`, которая сразу берет остаток от
хэша.

Set имеет такой интерфейс:

```erlang
-export([new/0, add_element/2, remove_element/2, get_element/2,
  is_set/1, filter/2, from_list/1, to_list/1, map/2, foldl/3, foldr/3, merge/2]).

-record(set, {storage, length}).
```

Так же из особенностей есть то, что массив, который используется для хранения элементов динамически увеличивается, если
количество элементов превышает 75% от размера массива. **НО** он не уменьшается при удалении, что при неправильном
использовании может привести к утечкам памяти.

Функции **filter** и **map** были реализованы без приведения к листу, fold'ы наоборот, реализованы через приведение к
листу (для разнообразия).

Конкретные функции можно посмотреть в файле [hashmap_set.erl](src%2Fhashmap_set.erl).

## Тестирование

Тестирование производилось с помощью библиотеки `common test`(официальная, для юнит тестирования) и `proper`(
неофициальная для тестирования свойств).

Тесты можно найти в папке [test](test).

В рамках тестирования были протестированы все функции из интерфейса, а так же были протестированы свойства моноида.